# #2 数据链路层 Data link layer

局域网虽然也是网络，但我们不在网络层讨论局域网。因为网络层主要讨论多个网络互连的问题，是讨论一个分组如何从一个网络通过路由器转发到另一个网络。本章中我们研究的是在同一个局域网中，分组如何从一台主机传送到另一台主机，但不经过路由器转发。从整个互联网的角度看，局域网仍属于数据链路层的范围。

本章重要内容：

1. 数据链路层的两种信道：点对点信道 广播信道
2. 数据链路层的三个基本问题：封装成帧 透明传输 差错检测
3. 以太网 MAC 层的硬件地址。
4. 适配器、转发器、集线器、网桥、以太网交换机的作用和使用场合。

可靠传输协议将在传输层介绍，本章介绍的链路层协议都不是可靠传输的协议。只包括最基本的差错检测。差错检测所检测的是比特差错，假定接收端收到的每一帧都没有比特差错，仍有可能出现帧丢失、帧重复、帧失序等传输差错。总之我们应当明确，“无比特差错”和“无传输差错”是不同的概念，在数据链路层使用 CRC 检测确实能够实现无比特差错的传输，但这还不是可靠传输。CRC = 循环冗余检验。



## 点对点信道

### PPP —— Point-to-Point Protocol 点对点协议

我们知道，用户需要连接到某个 ISP 才能接入互联网，PPP 协议就是用户计算机和 ISP 进行通信时所使用的链路层协议。点对点协议 PPP 是数据链路层使用最多的一种协议，它的特点是：简单；只检测差错而不纠正；不使用序号也不进行流量控制；可同时支持多种网络层协议。



## 广播信道

### 局域网

局域网可按网络拓扑分类，包括：星形网（使用集线器）、环形网、总线网。如今，以太网 = 局域网。

局域网的优点：具有广博功能，从一个站点可很方便地访问全网；便于系统的扩展和逐渐演变；提高了系统的可靠性、可用性和生存性。

### 适配器的作用

适配器是在主机箱内插入的一块网络接口板，又称网络接口卡或网卡。适配器和局域网之间的通信通过电缆或双绞线以串行传输方式进行。而适配器和计算机之间的通信则通过计算机主板上的 I/O 总线以并行传输方式进行。因此适配器的一个重要功能为：进行数据串行传输和并行传输的转换。计算机的硬件地址就在适配器的 ROM 中。

- 适配器（网卡）——计算机的硬件地址——物理地址或 MAC 地址
- CPU 和存储器——计算机的软件地址——IP 地址

### CSMA/CD 协议

要点：多点接入（说明是总线型网络）、载波监听、碰撞检测（也称冲突检测，意思是边发送边监听）

### 使用集线器的星型拓扑

集线器工作在物理层。

### 以太网的 MAC 地址

> 名字指出我们要寻找的那个资源，地址指出那个资源在何处，路由告诉我们如何到达该处。

以太网的硬件地址即 MAC 地址实际上就是适配器地址或适配器标识符，与主机所在的地点无关。源地址和目的地址都是 48 位长。